
{% block body %}
<style>
    .form-container {
        max-width: 600px;
        margin: 0 auto;
    }
    .custom-dropdown {
    position: relative;
    width: 300px;
    font-family: Arial, sans-serif;
}

.selected-option {
    padding: 10px;
    border: 1px solid #ccc;
    cursor: pointer;
}

.options-container {
    display: none;
    position: absolute;
    width: 100%;
    border: 1px solid #ccc;
    background-color: #fff;
    z-index: 1000;
}

.option {
    padding: 10px;
    cursor: pointer;
}

.option:not(:last-child) {
    border-bottom: 1px solid #eee;
}

.option:hover {
    background-color: #f8f8f8;
}

.option-title {
    font-weight: bold;
}

.option-description {
    font-size: 0.9em;
    color: #555;
}

</style>
<script>
   function enablePatientDetails(selectElement) {
    const patientDetailsSection = document.getElementById('patient-details-section');
    const serviceDescription = document.getElementById('get-service-description');
    // Make sure to check the 'value' of the selectElement, not just its presence
    if (selectElement.value && selectElement.value !== '') {
        // Show the patient details section
        fetchServiceDetails(selectElement.value, details => {
            patientDetailsSection.style.display = 'block';
            serviceDescription.innerHTML=details.description;
            console.log(details);
        })
    } else {
        // Hide the patient details section if no service is selected
        patientDetailsSection.style.display = 'none';
    }
}
function fetchServiceDetails(id, callback) {
    axios.get(`/get-service-description/${id}`).then(response => {
        callback(response.data);
    }).catch(error => {

    });
}
</script>
<div class="container mt-5">
    <div class="row">
        <div class="col-lg-8 offset-lg-2">
            <h2 class="mb-4">Registration Form</h2>
            <form action="/patient-registration" method="post" id="registration-form">
                <div class="mb-3">
                    <label for="services" class="form-label"><h3>Select a Treatment:</h3></label>
                    <select id="services" name="treatment" class="form-select" onchange="enablePatientDetails(this)">
                        <option selected disabled>Choose a Service</option>
                        {% for i in services %}
                        <option value="{{ i.service_id }}">{{ i.service_title }}</option>
                        {% endfor %}
                    </select>
                </div>

                <!-- Patient Details Section -->
                <div class="form-section" id="patient-details-section" style="display: none;">
                    <p id="get-service-description"></p>
                    <h2>Patient Details</h2>
                    <div class="mb-3">
                        <label for="firstname" class="form-label">Firstname:</label>
                        <input type="text" class="form-control" id="firstname" name="firstname" required>
                    </div>

                    <div class="mb-3">
                        <label for="lastname" class="form-label">Lastname:</label>
                        <input type="text" class="form-control" id="lastname" name="lastname" required>
                    </div>

                    <div class="mb-3">
                        <label for="age" class="form-label">Age:</label>
                        <input type="number" class="form-control" id="age" name="age" required>
                    </div>

                    <div class="mb-3">
                        <label for="gender" class="form-label">Gender:</label>
                        <select id="gender" class="form-select" name="gender" required>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label for="phone" class="form-label">Contact Number:</label>
                        <input type="text" class="form-control" id="phone" name="phone" required>
                    </div>

                    <div class="mb-3">
                        <label for="email" class="form-label">Email Address:</label>
                        <input type="text" class="form-control" id="email" name="email" required>
                    </div>

                    <div class="mb-3">
                        <label for="address" class="form-label">Location Address:</label>
                        <input type="text" class="form-control" id="address" name="address" required>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Register</button>
                </div>
            </form>
        </div>
    </div>
</div>

{% endblock %}